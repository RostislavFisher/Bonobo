<html>

<head>
    <link rel="stylesheet" href="/css/style.css">

    <title></title>
    <script>
        uploadMusic = function () {
            var x = document.getElementById("fileToUpload").value;
            if (x == "") {
                alert("Select music to upload");
                return false;
            }
            let song = document.getElementById("fileToUpload").files[0];
            let songName = document.getElementById("songName");
            let req = new XMLHttpRequest();
            let formData = new FormData();
            formData.append("song", song);
            formData.append("songName", songName.value);
            req.open("POST", '/appUploadSong');
            req.send(formData);
            // window.location.href = "/smarthouse/music.html";
            req.onreadystatechange = function () {
                if (req.readyState === 4) {
                    if (req.status === 200) {
                        window.location.href = "/smarthouse/music.html";
                    } else {
                        alert("Error");
                    }
                }
            }

        }
        songUploaded = function (input) {
            let songName = document.getElementById("songName");
            songName.value = input.files[0].name.split(".")[0];
        }
    </script>

</head>
<body onload="startAllFunctions()">
<div id="holder">
    <div id="body">
<!--        make center div-->
        <div class="center">
            <h1 style="text-align: center">Upload music</h1>
        </div>
        <div class="center">
            <input type="text" placeholder="Name of song" id="songName" class="textSongInput center">
        </div>
        <div class="center">
            <input type="file" id="fileToUpload" name="fileToUpload" accept="audio/mp3" class="center" onchange="songUploaded(this)" pattern="[^\s*$]">
        </div>
        <div class="center">
            <button class="button button5" onclick="uploadMusic()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                </svg> Upload
            </button>
        </div>

<!--        form for upload music and settings its name-->


    </div>
</div>



</body>

</html>
